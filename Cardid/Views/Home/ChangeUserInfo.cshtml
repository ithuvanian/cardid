
@using Cardid.Models
@model User

@{
    ViewBag.Title = "ChangeUserInfo";
}

@if (TempData["change-result"] != null)
{
    <p>
        @TempData["change-result"].ToString()
    </p>
}

<h2 class="view-title">Change User Info</h2>


@using (Html.BeginForm("ChangeName", "Home", FormMethod.Post))
{
    <div class="formValidationGroup">
        @Html.HiddenFor(m => m.UserID)
        @Html.LabelFor(m => m.DisplayName)
        @Html.TextBoxFor(m => m.DisplayName, new { @Value = Model.DisplayName })

        <button type="submit" class="btn inline-btn">Submit</button>
    </div>
}

@using (Html.BeginForm("ChangeEmail", "Home", FormMethod.Post))
{
    <div class="formValidationGroup">
        @Html.HiddenFor(m => m.UserID)
        @Html.LabelFor(m => m.Email)
        @Html.TextBoxFor(m => m.Email, new { @Value = Model.Email })

        <button type="submit" class="btn inline-btn">Submit</button>
    </div>
}

@using (Html.BeginForm("ChangePassword", "Home", FormMethod.Post))
{

    <div class="formValidationGroup">
        @Html.HiddenFor(m => m.UserID)
        @Html.LabelFor(m => m.Password)
        @Html.PasswordFor(m => m.Password)
    </div>

    <div class="formValidationGroup">
        @Html.LabelFor(m => m.ConfirmPassword, "Confirm Password")
        @Html.PasswordFor(m => m.ConfirmPassword)

        <button type="submit" class="btn inline-btn">Submit</button>
    </div>
}

<div class="btn delete-btn delete-init">
    <span class="icons">
        &#xe904;
    </span>
    &nbsp;Delete Account
</div>

@using (Html.BeginForm("RemoveUser", "Home", new { userID = Model.UserID }, FormMethod.Post, new { @class = "delete-submit" }))
{
    <div>
        <span>Are you sure you want to delete your account? This cannot be undone.</span>
        <div>
            <button type="reset" class="btn main-btn cancel-btn">
                <span class="icons">
                    &#xe932;
                </span>
                &nbsp;Cancel
            </button>
            <span class="tab"></span>
            <button type="submit" class="btn delete-btn">
                <span class="icons">
                    &#xe904;
                </span>
                &nbsp;Confirm Delete
            </button>
        </div>
    </div>
}

<script>

    $(document).ready(function () {
        $('.delete-init').on('click', function () {
            $(this).hide();
            $('.delete-submit').css('display', 'inline-block');
        });

        $('.cancel-btn').on('click', function () {
            $('.delete-submit').css('display', 'none');
            $('.delete-init').show();
        });
    });

</script>
